- block:
    - name: Ensure GNU Stow is installed
      package:
        name: stow
        state: present

    - name: Stow all dotfiles to home directory (adopt)
      shell: stow --adopt --override='.*' --restow -t ~ .
      args:
        chdir: "{{ playbook_dir }}/adopt_dotfiles"

    - name: Stow all dotfiles to home directory (override)
      shell: stow --override='.*' -t ~ .
      args:
        chdir: "{{ playbook_dir }}/dotfiles"
  tags: dotfiles
